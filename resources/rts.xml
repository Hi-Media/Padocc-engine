<?xml version="1.0" encoding="UTF-8"?>
<project name="rts">
    <env
        name="integration"
        mailto="devaa@twenga.com, qateam@twenga.com, devrts@twenga.com"
        loadtwengaservers="true"
        basedir="/home/projects/extranet.twenga.com"
    >
        <property name="servers" value="continuous-02.dev" />
        <property name="commondir" value="${BASEDIR}/twenga-common" />
        <call target="content" />
    </env>

    <env
        name="qa"
        mailto="devaa@twenga.com, qateam@twenga.com, devrts@twenga.com"
        withsymlinks="true"
        loadtwengaservers="true"
        basedir="/home/httpd/extranet.twenga.com"
    >
        <property name="servers" value="${SERVER_EXTRANET_QA}" />
        <property name="commondir" value="/home/httpd/twenga-common" />
        <call target="content" />
    </env>

    <env
        name="prod46"
        mailto="devaa@twenga.com, qateam@twenga.com, devrts@twenga.com"
        withsymlinks="true"
        loadtwengaservers="true"
        basedir="/home/httpd/extranet.twenga.com"
    >
        <property name="servers" value="www46" />
        <property name="commondir" value="/home/httpd/twenga-common" />
        <call target="content" />
    </env>

    <env
        name="prod47"
        mailto="devaa@twenga.com, qateam@twenga.com, devrts@twenga.com"
        withsymlinks="true"
        loadtwengaservers="true"
        basedir="/home/httpd/extranet.twenga.com"
    >
        <property name="servers" value="www47" />
        <property name="commondir" value="/home/httpd/twenga-common" />
        <call target="content" />
    </env>

    <env
        name="prod"
        mailto="devaa@twenga.com, qateam@twenga.com, devrts@twenga.com"
        withsymlinks="true"
        loadtwengaservers="true"
        basedir="/home/httpd/extranet.twenga.com"
    >
        <property name="servers" value="${SERVER_EXTRANET}" />
        <property name="commondir" value="/home/httpd/twenga-common" />
        <call target="content" />
    </env>

    <target name="content">
        <externalproperty name="ref" description="Branch or tag to deploy" />
        <gitexport repository="git@git.twenga.com:rts/rts.git" ref="${REF}"
            destdir="${SERVERS}:${BASEDIR}" exclude="config.*" />
        <gitexport repository="git@git.twenga.com:fwt/fwt.git" ref="rts"
            destdir="${SERVERS}:${BASEDIR}/fwt" exclude="config.*" />
        <mkdir destdir="${SERVERS}:${BASEDIR}/cache/smarty/cache" mode="777" />
        <mkdir destdir="${SERVERS}:${BASEDIR}/cache/smarty/templates_c" mode="777" />
        <cvsexport repository=":extssh:gaubry@fs1.twenga.com:/home/cvsroot" module="twengaweb/common"
            destdir="${SERVERS}:${COMMONDIR}" />
        <buildlanguage project="rts" destdir="${SERVERS}:${BASEDIR}/languages" />
    </target>
</project>
