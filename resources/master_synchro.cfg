##################################################################################
#
# git add master_synchro.cfg
# git commit -m "Message de commit qui va bien"
# git push schedulers
#
##################################################################################
##################################################################################
# A REDEPLOYER SUR TOUS LES SERVEURS WEB DES QU'UNE DES 8 LIGNES EST MODIFIEE
GEOZONE_PHPWEB_POOL1="fr au in cn"
GEOZONE_PHPWEB_POOL2="de pl ru es"
GEOZONE_PHPWEB_POOL3="uk ch it jp"
GEOZONE_PHPWEB_POOL4="nl be"

GEOZONE_PHPWEB_POOL5="us br"
SERVER_PHPWEB_POOL1="www34 www40 www45 www54 www56 www58 www60 www73 wwwtest1"
SERVER_PHPWEB_POOL2="www36 www44 www53 www55 www57 www59 www61 wwwtest1"
SERVER_PHPWEB_POOL3="www42 www65 www67 www69 www74 wwwtest2"
SERVER_PHPWEB_POOL4="www49 www62 www64 www66 www68 www70 wwwtest2"
SERVER_PHPWEB_POOL5="www-01 www-02 www-03 www-04 www-05"
SERVER_PHPWEB_ALL="$SERVER_PHPWEB_POOL1 $SERVER_PHPWEB_POOL2 $SERVER_PHPWEB_POOL3 $SERVER_PHPWEB_POOL4 $SERVER_PHPWEB_POOL5"
##################################################################################

SERVER_INT_PHPWEB_DC_EU1="www3"
SERVER_INT_PHPWEB_DC_US1="www-06"
SERVER_INT_PHPWEB_ALL="$SERVER_INT_PHPWEB_DC_EU1 $SERVER_INT_PHPWEB_DC_US1"
SERVER_BCT_PHPWEB_DC_EU1="www51"
SERVER_BCT_PHPWEB_DC_US1=""
SERVER_BCT_PHPWEB_ALL="$SERVER_BCT_PHPWEB_DC_EU1 $SERVER_BCT_PHPWEB_DC_US1"
SERVER_QA_PHPWEB_DC_EU1="www17"
SERVER_QA_PHPWEB_DC_US1="www-07"
SERVER_QA_PHPWEB_ALL="$SERVER_QA_PHPWEB_DC_EU1 $SERVER_QA_PHPWEB_DC_US1"
SERVER_QA_EXCLUSIVE_PHPWEB_DC_EU1="www17"
SERVER_QA_EXCLUSIVE_PHPWEB_DC_US1="www-07"
SERVER_QA_EXCLUSIVE_PHPWEB_ALL="$SERVER_QA_EXCLUSIVE_PHPWEB_DC_EU1 $SERVER_QA_EXCLUSIVE_PHPWEB_DC_US1"
SERVER_INTERNAL_PHPWEB_ALL="$SERVER_INT_PHPWEB_ALL $SERVER_BCT_PHPWEB_ALL $SERVER_QA_PHPWEB_ALL"
SERVER_STATIC_WEB_DC_EU1="storage08 storage09 storage10 storage11 storage12 storage13 ukproxy01 ukproxy02"
SERVER_STATIC_WEB_DC_US1="static-01 static-02"
SERVER_STATIC_WEB_ALL="$SERVER_STATIC_WEB_DC_EU1 $SERVER_STATIC_WEB_DC_US1"
SERVER_WBATCH_DC_EU1="wbatch01 wbatch02 wbatch03 wbatch04 wbatch05 wbatch06 wbatch07 wbatch08 wbatch09 wbatch10 wbatch11 wbatch12"
SERVER_WBATCH_DC_US1="wbatch-01 wbatch-02"
SERVER_WBATCH_ALL="$SERVER_WBATCH_DC_EU1 $SERVER_WBATCH_DC_US1"
SERVER_EBAY_EU1="ebayus1.prod ebayus2.prod ebayus3.prod ebayus4.prod"
SERVER_EBAY_US1="ebayfr1.prod ebayit1.prod ebayuk1.prod ebayde1.prod"
SERVER_EBAY_ALL="$SERVER_EBAY_EU1 $SERVER_EBAY_US1"
SERVER_CACHE_TRAVEL_DC_EU1="cache-01 cache-02"
SERVER_CACHE_TRAVEL_DC_US1=""
SERVER_CACHE_TRAVEL_ALL="$SERVER_CACHE_TRAVEL_DC_EU1 $SERVER_CACHE_TRAVEL_DC_US1"
SERVER_CACHE_LEVEL1_FAILOVER_DC_EU1="cache-02"
SERVER_CACHE_LEVEL1_FAILOVER_DC_US1="cache-01"
SERVER_CACHE_LEVEL1_FAILOVER_ALL="$SERVER_CACHE_LEVEL1_FAILOVER_DC_EU1 $SERVER_CACHE_LEVEL1_FAILOVER_DC_US1"
SERVER_CACHE_L1_DC_EU1="cache-01 cache-02"
SERVER_CACHE_L1_DC_US1="cache-01 cache-02"
SERVER_CACHE_L2_ALL="$SERVER_CACHE_L1_DC_EU1 $SERVER_CACHE_L1_DC_US1"
SERVER_CACHE_LEVEL2_DC_EU1="cache-01"
SERVER_CACHE_LEVEL2_DC_US1="cache-01"
SERVER_CACHE_LEVEL2_ALL="$SERVER_CACHE_LEVEL2_DC_EU1 $SERVER_CACHE_LEVEL2_DC_US1"
SERVER_CACHE_LEVEL2_FAILOVER_DC_EU1="cache-02"
SERVER_CACHE_LEVEL2_FAILOVER_DC_US1="cache-02"
SERVER_CACHE_LEVEL2_FAILOVER_ALL="$SERVER_CACHE_LEVEL2_FAILOVER_DC_EU1 $SERVER_CACHE_LEVEL2_FAILOVER_DC_US1"
SERVER_CACHE_L2_DC_EU1="cache-01 cache-02"
SERVER_CACHE_L2_DC_US1="cache-01 cache-02"
SERVER_CACHE_L2_ALL="$SERVER_CACHE_L2_DC_EU1 $SERVER_CACHE_L2_DC_US1"
SERVER_CACHE_SEARCH_DC_EU1="cache-03"
SERVER_CACHE_SEARCH_DC_US1="cache-03"
SERVER_CACHE_SEARCH_ALL="$SERVER_CACHE_SEARCH_DC_EU1 $SERVER_CACHE_SEARCH_DC_US1"
SERVER_CACHE_DC_EU1="cache-01 cache-02 cache-03 cache-04 cache-05 cache13 cache17cache21 cache22 cache23 cache24 cache25 cache26 cache27 cache28 cache29 cache30 cache31"
SERVER_CACHE_DC_US1="cache-01 cache-02 cache-03 cache-04 cache-05"
SERVER_CACHE_ALL="$SERVER_CACHE_DC_EU1 $SERVER_CACHE_DC_US1"
SERVER_PHOTO_CRAWLER_DC_EU1="batch112 batch113 batch114 batch115 batch116 batch244 batch379 batch380 batch381 batch386 batch387 batch388 batch392 batch393 batch394 batch395 batch396 batch397 batch398 batch410 batch411 batch412"
SERVER_PHOTO_CRAWLER_DC_US1="photous-01 photous-02 photous-03 photous-04 photobr-01"
SERVER_PHOTO_CRAWLER_ALL="$SERVER_PHOTO_CRAWLER_DC_EU1 $SERVER_PHOTO_CRAWLER_DC_US1"

WEBSITES_FRONT_FR="www.twenga.fr internal.twenga.fr qa.twenga.fr bct.twenga.fr"
WEBSITES_FRONT_US="www.twenga.com internal.twenga.com qa.twenga.com"
WEBSITES_FRONT_UK="www.twenga.co.uk internal.twenga.co.uk qa.twenga.co.uk bct.twenga.co.uk"
WEBSITES_FRONT_DE="www.twenga.de internal.twenga.de qa.twenga.de"
WEBSITES_FRONT_NL="www.twenga.nl internal.twenga.nl qa.twenga.nl bct.twenga.nl"
WEBSITES_FRONT_PL="www.twenga.pl internal.twenga.pl qa.twenga.pl bct.twenga.pl"
WEBSITES_FRONT_IT="www.twenga.it internal.twenga.it qa.twenga.it bct.twenga.it"
WEBSITES_FRONT_ES="www.twenga.es internal.twenga.es qa.twenga.es bct.twenga.es"
WEBSITES_FRONT_BE="www.twenga.be internal.twenga.be qa.twenga.be"
WEBSITES_FRONT_CH="www.twenga.ch qa.twenga.ch"
WEBSITES_FRONT_RU="www.twenga.ru internal.twenga.ru qa.twenga.ru bct.twenga.ru"
WEBSITES_FRONT_BR="www.twenga.com.br internal.twenga.com.br qa.twenga.com.br bct.twenga.com.br"
WEBSITES_FRONT_AU="www.twenga.com.au internal.twenga.com.au qa.twenga.com.au bct.twenga.com.au"
WEBSITES_FRONT_IN="internal.twenga.in qa.twenga.in"
WEBSITES_FRONT_CN="www.tangou.cn internal.tangou.cn qa.tangou.cn bct.tangou.cn"
WEBSITES_FRONT_JP="www.twenga.jp internal.twenga.jp qa.twenga.jp"

WEBSITES_ALL="$WEBSITES_FRONT_FR $WEBSITES_FRONT_US $WEBSITES_FRONT_UK $WEBSITES_FRONT_DE $WEBSITES_FRONT_NL $WEBSITES_FRONT_PL $WEBSITES_FRONT_IT $WEBSITES_FRONT_ES $WEBSITES_FRONT_BE $WEBSITES_FRONT_CH $WEBSITES_FRONT_RU $WEBSITES_FRONT_BR $WEBSITES_FRONT_AU $WEBSITES_FRONT_JP $WEBSITES_FRONT_CN"

INTERNAL_USER="batch"
INTERNAL_PASS="x2b3a1"

SERVER_SCHED_DC_EU1="sched-01 sched-02"
SERVER_SCHED_DC_US1="sched-01"
SERVER_SCHED_ALL="schedmaster-01 $SERVER_SCHED_DC_EU1 $SERVER_SCHED_DC_US1"

#Folders

FOLDER_HTTPD_SRC="/home/prod/twengaweb"
FOLDER_HTTPD_DST="/home/httpd"
FOLDER_HTTPD_QA_DST="/home/httpd-qa"
FOLDER_HTTPD_QA_EXCLUSIVE_DST="/home/httpd-qa"
FOLDER_HTTPD_BCT_DST="/home/httpd-bct"
FOLDER_BINARIES="/home/prod/twenga/bin"
FOLDER_BINARIES_64="/home/prod/twenga/bin64"
FOLDER_LOGO_SRC="/home/prod/twenga_files/merchant_logos"
FOLDER_LOGO_DST="/home/httpd/www.twenga/html/images/sites"
FOLDER_TMPPHOTO_SRC="/home/prod/twenga_files/tmpproduct_photos"
FOLDER_TMPPHOTO_DST="/home/images/tmpproduct_photos"
FOLDER_PHOTO_SRC="/home/prod/twenga_files/product_photos"
FOLDER_PHOTO_DST="/home/images/product_photos"
FOLDER_MASTER="/home/prod/twenga/master"
FOLDER_STATIC_DST="/home/static"
FOLDER_WEB_COMMON_DST="twenga-common"
FOLDER_WEB_COMMON_SRC="common"
SCHEDULER_DIR="/opt/tmp/scheduler"


if [ "`hostname --domain`" = "us1.twenga.local" ]; then
	TWENGA_DC="US"
else
	TWENGA_DC="EU"
fi

#########################################################################
##################### DATACENTER SPECIFIC VARIABLES #####################
#########################################################################

#########################################################################
#                                                                       #
#                            #     #   #####                            #
#                            #     #  #     #                           #
#                            #     #  #                                 #
#                            #     #   #####                            #
#                            #     #        #                           #
#                            #     #  #     #                           #
#                             #####    #####                            #
#                                                                       #
#########################################################################

if [ "$TWENGA_DC" = "US" ]; then
VOPOOL4="vous vobr"
SERVER_PHPWEB="$SERVER_PHPWEB_POOL5"
SERVER_INT_PHPWEB="$SERVER_INT_PHPWEB_DC_US1"
SERVER_BCT_PHPWEB="$SERVER_BCT_PHPWEB_DC_US1"
SERVER_QA_PHPWEB="$SERVER_QA_PHPWEB_DC_US1"
SERVER_INTERNAL_PHPWEB="$SERVER_INT_PHPWEB $SERVER_BCT_PHPWEB $SERVER_QA_PHPWEB"
SERVER_STATIC_WEB="$SERVER_STATIC_WEB_DC_US1"
SERVER_WBATCH="$SERVER_WBATCH_DC_US1"
SERVER_CACHE_TRAVEL="$SERVER_CACHE_TRAVEL_DC_US1"
SERVER_CACHE_LEVEL1_FAILOVER="$SERVER_CACHE_LEVEL1_FAILOVER_DC_US1"
SERVER_CACHE_L1="$SERVER_CACHE_L1_DC_US1"
SERVER_CACHE_LEVEL2="$SERVER_CACHE_LEVEL2_DC_US1"
SERVER_CACHE_LEVEL2_FAILOVER="$SERVER_CACHE_LEVEL2_FAILOVER_DC_US1"
SERVER_CACHE_L2="$SERVER_CACHE_L2_DC_US1"
SERVER_CACHE_SEARCH="$SERVER_CACHE_SEARCH_DC_US1"
SERVER_CACHE="$SERVER_CACHE_DC_US1"
SERVER_PHOTO_CRAWLER="$SERVER_PHOTO_CRAWLER_DC_US1"
SERVER_PUPPET="puppet-01"
SERVER_CRON="monitor-03"
SERVER_NAGIOS="monitor-01"
SERVER_OPENVZ="vz-01 vz-02 vz-03 vz-04 vz-05 vz-06 vz-07 vz-08"
SERVER_SUPERMICRO="supermicro-01"
SERVER_DATAWEB="dataweb-01"
SERVER_DNS="ns-01 ns-02"
SERVER_BINARIES=""
SERVER_BINARIES_64="$SERVER_INTERNAL_PHPWEB $SERVER_PHPWEB $SERVER_SCHED"
SERVER_SEARCH="shus-01 shus-02 shus-03 shus-04 shac-01 shac-02"
SERVER_MYSQL="cmus-01 mus-01 mus-02 mus-03 mus-04 mus-05 mus-06 mus-07 mus-08 mus-09 mus-10 mus-11 mus-12 mus-13 mus-14 mus-15 mmas-03 mstat5 cmbr-01"
SERVER_IDX="idxus-00 idxus-01 idxus-02 idxus-03 idxus-04 idxus-05 idxus-06 idxus-07 idxus-08 idxus-09 idxus-10 idxus-11 idxus-13 idxus-14 idxus-15 idxbr-00"
SERVER_STORAGE="static-01 static-02 img-01 img-02 img-03 img-04 img-05 img-06 img-07 img-08 img-09 img-10 img-11 img-12 img-13 img-14 img-15 img-16 img-17 img-18 img-19 img-20 img-21 img-22 img-23 img-24 img-25 img-26 img-27 img-28 img-29 img-30"
SERVER_CRAWLNODE="crawlnode-01 crawlnode-02 crawlnode-03 crawlnode-04 crawlnode-05 crawlnode-06 crawlnode-07"
SERVER_BINARIES_64="$SERVER_INTERNAL_PHPWEB $SERVER_PHPWEB $SERVER_SCHED $SERVER_IDX $SERVER_CRAWLNODE $SERVER_PHOTO_CRAWLER"
SERVER_LOAD_BALANCER="lb-01 lb-02"
SERVER_SCHED="$SERVER_SCHED_DC_US1"

MASTER_TARGET_PROD="$SERVER_PUPPET $SERVER_NAGIOS $SERVER_SEARCH $SERVER_MYSQL $SERVER_STORAGE $SERVER_CACHE $SERVER_LOAD_BALANCER $SERVER_SUPERMICRO $SERVER_DATAWEB $SERVER_OPENVZ $SERVER_DNS $SERVER_BINARIES_64 $SERVER_CRON $SERVER_SCHED"
MASTER_TARGET_DEV=""
MASTER_TARGET_ALL="$MASTER_TARGET_PROD"

WEBSITES="$WEBSITES_FRONT_US $WEBSITES_FRONT_BR"

fi

#########################################################################
#                                                                       #
#                            #######  #     #                           #
#                            #        #     #                           #
#                            #        #     #                           #
#                            #####    #     #                           #
#                            #        #     #                           #
#                            #        #     #                           #
#                            #######   #####                            #
#                                                                       #
#########################################################################

if [ "$TWENGA_DC" = "EU" ]; then

VOPOOL1="vofr vocn voit vouk voau"
VOPOOL2="vobe voes voru"
VOPOOL3="vode vojp voin vonl voch vopl"

SERVER_PHPWEB="$SERVER_PHPWEB_POOL1 $SERVER_PHPWEB_POOL2 $SERVER_PHPWEB_POOL3 $SERVER_PHPWEB_POOL4"
SERVER_INT_PHPWEB="$SERVER_INT_PHPWEB_DC_EU1"
SERVER_BCT_PHPWEB="$SERVER_BCT_PHPWEB_DC_EU1"
SERVER_QA_PHPWEB="$SERVER_QA_PHPWEB_DC_EU1"
SERVER_INTERNAL_PHPWEB="$SERVER_INT_PHPWEB $SERVER_BCT_PHPWEB $SERVER_QA_PHPWEB"
SERVER_DEV_PHPWEB="wwwtest1"

SERVER_AAI="aai@aai-01 aai@aai-02"
SERVER_ADSERVER="www8 www9"
SERVER_EXTRANET="www46 www47"
SERVER_EXTRANET_PRE_PROD="www46"
SERVER_EXTRANET_QA="www10"
SERVER_STATIC_WEB="$SERVER_STATIC_WEB_DC_EU1"
SERVER_TSUPPORT=""
SERVER_MERCHANT="www17"
SERVER_WBATCH="$SERVER_WBATCH_DC_EU1"
SERVER_ADMIN="www2 www4 wbatch01 wbatch10 wbatch-01"
#SERVER_CACHE_QANDA="cacheqanda1 cacheqanda2"
SERVER_CACHE_TRAVEL="$SERVER_CACHE_TRAVEL_DC_EU1"
SERVER_CACHE_LEVEL1_FAILOVER="$SERVER_CACHE_LEVEL1_FAILOVER_DC_EU1"
SERVER_CACHE_L1="$SERVER_CACHE_L1_DC_US1"
SERVER_CACHE_LEVEL2="$SERVER_CACHE_LEVEL2_DC_EU1"
SERVER_CACHE_LEVEL2_FAILOVER="$SERVER_CACHE_LEVEL2_FAILOVER_DC_EU1"
SERVER_CACHE_L2="$SERVER_CACHE_L2_DC_US1"
SERVER_CACHE_SEARCH="$SERVER_CACHE_SEARCH_DC_EU1"
SERVER_CACHE="$SERVER_CACHE_DC_EU1"
SERVER_PHOTO_CRAWLER="$SERVER_PHOTO_CRAWLER_DC_EU1"
SERVER_CHINE="cnweb-01 cnweb-02"

SERVER_PUPPET="monitor09"
SERVER_CRON="monitor07"
SERVER_NAGIOS="monitor01 monitor02 monitor03 monitor04 monitor05 monitor06 monitor08"
SERVER_OPENVZ="vzwww48 vzwww49 vzwww38 vzwww39 vzwww26 vzwww27 vzwww43 vzbatch264 vzbatch265 vzbatch336 vzbatch337 vzwww51 vzwww53 vzwww54 vzwww55 vzwww56 vzwww58 vzwww59 vzwww60 vzwww61 vzwww62 vzwww64 vzwww65 vzwww66 vzwww67 vzwww68 vzwww69 vzwww70 vzdv3 vzdv2 vzwww37 vzmysql20 vzmysql21 vzmysql22 vzmysql79 vzbatch319 vzbatch321 vzbatch323 vzbatch306 vzbatch371 vzbatch372 vzmysql80 vzmysql136 vzmysql121 vzmysql130 vzmysql195 vzmysql115 vzwww73 vzwww74 vzwww33 vzmysql78 vzbatch278"
SERVER_SUPERMICRO="supermicro01 supermicro02 supermicro03 supermicro04 supermicro05 supermicro06 supermicro07 supermicro08 supermicro09 supermicro10"
SERVER_DATAWEB="dataweb01 dataweb02 dataweb03"
SERVER_DNS="dns01 dns02 dns03 dns04 dns05"
SERVER_SCHED="$SERVER_SCHED_DC_EU1"

#  temporarily removed
SERVER_BINARIES="www10"
SERVER_BINARIES_64="$SERVER_INTERNAL_PHPWEB $SERVER_PHPWEB dv2 dv3 dv4 dv5 dv6 shbck2 shbck3 shbck4 shbck5 batch82 batch83 batch84 batch86 batch111 batch112 batch113 batch114 batch115 batch116 batch117 batch118 batch119 batch121 batch122 batch123 batch124 batch125 batch127 batch128 batch131 batch136 batch137 batch138 batch139 batch141 batch142 batch143 batch145 batch148 batch150 batch151 batch152 batch153 batch154 batch155 batch156 batch157 batch158 batch160 batch161 batch162 batch163 batch164 batch165 batch166 batch167 batch169 batch170 batch171 batch172 batch173 batch174 batch175 batch176 batch177 batch178 batch179 batch180 batch181 batch182 batch183 batch184 batch185 batch186 batch187 batch188 batch189 batch190 batch191 batch192 batch193 batch194 batch195 batch196 batch197 batch198 batch199 batch200 batch201 batch202 batch203 batch204 batch205 batch207 batch209 batch211 batch212 batch213 batch214 batch215 batch216 batch217 batch218 batch219 batch221 batch222 batch223 batch224 batch225 batch226 batch227 batch228 batch229 batch230 batch231 batch232 batch233 batch234 batch235 batch236 batch238 batch239 batch240 batch241 batch242 batch243 batch244 batch247 batch248 batch249 batch250 batch251 batch252 batch253 batch254 batch255 batch256 batch258 batch259 batch260 batch261 batch262 batch263 batch264 batch265 batch266 batch267 batch268 batch269 batch270 batch271 batch272 batch273 batch274 batch276 batch277 batch278 batch282 batch283 batch284 batch285 batch286 batch287 batch288 batch289 batch290 batch291 batch292 batch293 batch294 batch295 batch296 batch297 batch298 batch299 batch300 batch301 batch302 batch303 batch304 batch305 batch306 batch307 batch308 batch309 batch310 batch311 batch312 batch313 batch314 batch315 batch316 batch317 batch318 batch319 batch320 batch321 batch322 batch323 batch324 batch326 batch327 batch328 batch329 batch330 batch331 batch332 batch333 batch334 batch335 batch336 batch337 batch338 batch339 batch340 batch341 batch342 batch343 batch344 batch345 batch346 batch347 batch348 batch349 batch350 batch351 batch352 batch353 batch354 batch355 batch356 batch357 batch358 batch359 batch360 batch361 batch362 batch363 batch364 batch365 batch366 batch367 batch368 batch369 batch370 batch371 batch372 batch373 batch374 batch375 batch376 batch377 batch378 batch379 batch380 batch381 batch382 batch383 batch384 batch385 batch389 batch390 batch391 batch392 batch393 batch394 batch395 batch396 batch397 batch398 batch399 batch400 batch401 batch402 batch403 batch404 batch406 batch409 batch410 batch411 batch412 $SERVER_ADMIN $SERVER_ADSERVER $SERVER_SCHED"
SERVER_SEARCH="sh9 sh10 sh11 sh12 sh21 sh25 sh28 sh29 sh32 sh34 sh35 sh36 sh37 sh38 sh39 sh40 sh41 sh42 sh45 sh46 sh47 sh48 sh49 sh50 sh51 sh52 sh53 sh54 sh56 sh57 sh60 sh61 sh62 sh63 sh64 sh65 sh66 sh67 sh68 sh69 sh70 sh71 sh72 sh73 sh74 sh75 sh76 sh77 sh78 sh79 sh80 sh81 sh82 sh83 sh84 sh85 sh86 sh87 sh88 sh89 sh90 sh91 sh92 sh93 sh94 sh95 sh96 sh97 shtest0 shtest1 shtest2 shtest3 shtest4 shtest5"
# mysql83 removed
SERVER_MYSQL="mysql6 mysql9 mysql10 mysql14 mysql16 mysql23 mysql24 mysql25 mysql27 mysql28 mysql29 mysql30 mysql50 mysql51 mysql52 mysql53 mysql54 mysql55 mysql56 mysql57 mysql58 mysql59 mysql60 mysql61 mysql62 mysql63 mysql64 mysql65 mysql67 mysql68 mysql69 mysql70 mysql71 mysql73 mysql74 mysql75 mysql76 mysql77 mysql81 mysql82 mysql84 mysql85 mysql86 mysql87 mysql89 mysql90 mysql91 mysql92 mysql93 mysql94 mysql95 mysql96 mysql99 mysql100 mysql101 mysql102 mysql103 mysql104 mysql105 mysql106 mysql108 mysql110 mysql112 mysql113 mysql116 mysql118 mysql119 mysql120 mysql122 mysql124 mysql125 mysql126 mysql128 mysql137 mysql138 mysql139 mysql140 mysql141 mysql142 mysql143 mysql144 mysql145 mysql146 mysql147 mysql148 mysql149 mysql150 mysql151 mysql152 mysql153 mysql154 mysql155 mysql156 mysql157 mysql158 mysql159 mysql160 mysql161 mysql162 mysql163 mysql164 mysql165 mysql166 mysql167 mysql168 mysql169 mysql170 mysql171 mysql172 mysql173 mysql174 mysql175 mysql176 mysql179 mysql180 mysql181 mysql182 mysql183 mysql184 mysql185 mysql186 mysql187 mysql188 mysql190 mysql191 mysql197 mysql198 mysql199 mysql200 mysql201 mysql202 mysql203 mysql204 mysql205 mysql206 mysql208 mysql209 mysql215 mysql216 mysql217 mysql218 mysql219 mysql222 mysql224 mysql225 mysql226 mysql227 mysql228 mysql231 mysql232 mysql234 mysql235 mysql236 mysql237 mysql238 mysql239 mysql240 mysql241 mysql242 mysql243 mysql244 mysql245 mysql246 mysql247 mdata-01 mdata-02"
SERVER_STORAGE="storage06 storage07 storage08  storage09 storage10 storage11 storage12 storage13 storage57 storage58 storage59 storage60 storage61 storage62 storage63 storage64 storage65 storage66 storage67 storage68 storage69 storage70 storage71 storage72 storage73 storage74 storage75 storage76 storage77 storage78 storage79 storage80 storage81 storage82 storage83 storage84 storage85 storage86 storage87 storage88 storage89 storage90 storage91 storage92 storage93 storage94 storage95 storage96 storage97 storage98 storage99 storage100 storage101 storage102 storage103 storage104 storage105 storage106 storage107 storage108 storage109 storage110 storage111 storage112 storage113 storage114 storage115 storage116 storage117 storage118 storage119 storage120 storage121 storage122 storage123 storage124 storage125 storage126"
SERVER_VM_DEV="vmdev1 vmdev2"
SERVER_LOAD_BALANCER="lb-01 lb-02 lb-03 lbint-01"
MASTER_TARGET_PROD="$SERVER_PUPPET fs1 fs2 fs3 fs4 fs5 fs6 $SERVER_NAGIOS $SERVER_ADMIN $SERVER_EXTRANET $SERVER_EXTRANET_QA $SERVER_MERCHANT $SERVER_BINARIES $SERVER_BINARIES_64 $SERVER_SEARCH $SERVER_MYSQL $SERVER_STORAGE $SERVER_CACHE $SERVER_LOAD_BALANCER $SERVER_MOGILEFS $SERVER_MOOOSEFS $SERVER_SUPERMICRO $SERVER_DATAWEB $SERVER_OPENVZ $SERVER_DNS $SERVER_CRON $SERVER_SCHED"
MASTER_TARGET_DEV="dv2 dv3 dv4 mdv1 mysql19 ppsh13 $SERVER_VM_DEV"
MASTER_TARGET_ALL="$MASTER_TARGET_PROD $MASTER_TARGET_DEV"

WEBSITES="$WEBSITES_FRONT_FR $WEBSITES_FRONT_UK $WEBSITES_FRONT_DE $WEBSITES_FRONT_NL $WEBSITES_FRONT_PL $WEBSITES_FRONT_IT $WEBSITES_FRONT_ES $WEBSITES_FRONT_BE $WEBSITES_FRONT_CH $WEBSITES_FRONT_RU $WEBSITES_FRONT_AU $WEBSITES_FRONT_JP $WEBSITES_FRONT_CN"

fi

#########################################################################
#####################     FUNCTIONS  DEFINITION     #####################
#########################################################################

function getPhpWeb
{
	zgz="$1"

	if [ "`echo \"$GEOZONE_PHPWEB_POOL1 \" | grep \"$zgz \"`" != "" ]; then
		echo "$SERVER_PHPWEB_POOL1"
		return;
	fi
	if [ "`echo \"$GEOZONE_PHPWEB_POOL2 \" | grep \"$zgz \"`" != "" ]; then
		echo "$SERVER_PHPWEB_POOL2"
		return;
	fi
	if [ "`echo \"$GEOZONE_PHPWEB_POOL3 \" | grep \"$zgz \"`" != "" ]; then
		echo "$SERVER_PHPWEB_POOL3"
		return;
	fi
	if [ "`echo \"$GEOZONE_PHPWEB_POOL4 \" | grep \"$zgz \"`" != "" ]; then
		echo "$SERVER_PHPWEB_POOL4"
		return;
	fi
	if [ "`echo \"$GEOZONE_PHPWEB_POOL5 \" | grep \"$zgz \"`" != "" ]; then
        echo "$SERVER_PHPWEB_POOL5"
        return;
    fi
	echo "$SERVER_PHPWEB"
}

function getAllGeozoneForServer
{
	zserver="$1"

	if [ "$zserver" = "wwwtest1" ];then
		echo "$GEOZONE_PHPWEB_POOL1 $GEOZONE_PHPWEB_POOL2"
		return;
	fi
	if [ "$zserver" = "wwwtest2" ];then
        echo "$GEOZONE_PHPWEB_POOL3 $GEOZONE_PHPWEB_POOL4"
        return;
    fi
	if [ "`echo \"$SERVER_PHPWEB_POOL1 \" | grep \"$zserver \"`" != "" ]; then
		echo "$GEOZONE_PHPWEB_POOL1"
		return;
	fi
	if [ "`echo \"$SERVER_PHPWEB_POOL2 \" | grep \"$zserver \"`" != "" ]; then
		echo "$GEOZONE_PHPWEB_POOL2"
		return;
	fi
	if [ "`echo \"$SERVER_PHPWEB_POOL3 \" | grep \"$zserver \"`" != "" ]; then
		echo "$GEOZONE_PHPWEB_POOL3"
		return;
	fi
	if [ "`echo \"$SERVER_PHPWEB_POOL4 \" | grep \"$zserver \"`" != "" ]; then
		echo "$GEOZONE_PHPWEB_POOL4"
		return;
	fi
	if [ "`echo \"$SERVER_PHPWEB_POOL5 \" | grep \"$zserver \"`" != "" ]; then
        echo "$GEOZONE_PHPWEB_POOL5"
        return;
    fi
	echo "$SEARCH_POOL1 $SEARCH_POOL2 $SEARCH_POOL3 $SEARCH_POOL4 $SEARCH_POOL5 $SEARCH_POOL6 $SEARCH_POOL7 $SEARCH_POOL8 $SEARCH_POOL9 $SEARCH_POOL10"
}

#Arg1: internal, bct or qa
function getInternalServer
{
	zarg1=`echo $1 | cut -c 1-3 | awk '{print toupper($1)}'`
	echo `declare -p "SERVER_${zarg1}_PHPWEB" 2>/dev/null | awk -F '"' '{print $2}'`
}

#Arg1: wwwXX
#Return internal or www or unknown
function getServerType
{
	zarg1="$1"
	zvar_www="$SERVER_PHPWEB ."
	zvar_internal="$SERVER_INTERNAL_PHPWEB ."
	if [ "`echo $zvar_www | grep \"$zarg1 \"`" != "" ]; then
		echo "www"
		return;
	fi

	if [ "`echo $zvar_internal | grep \"$zarg1 \"`" != "" ]; then
		echo "internal"
		return;
	fi

	echo "unknown"
	return;
}

function getLbList
{
		echo "lb-01 lb-02 lb-03";
}



# Return gz_name from web site name
function getGeozoneForWebsite
{
	zwebsite="$1"

	all_geozone=`getAllGeozoneForServer x`

	for gz in $all_geozone;
	do
		geozone_cap=`echo $gz | awk '{print toupper($1)}'`
		websites_front="`declare -p \"WEBSITES_FRONT_${geozone_cap}\" 2>/dev/null | awk -F '\"' '{print $2}'`"
		if [ "`echo \"$websites_front \" | grep \"$zwebsite \"`" != "" ]; then
			echo "$gz"
			return;
		fi
	done
}


function getIPs
{
    echo $(dig @208.67.222.222 "$1" +short | grep -v twenga | tr '\n' ' ')
}

function getIpForWebsite
{
	zgz=$(echo $1 | awk '{print toupper($1)}')

	case "$zgz" in
		FR)
		website="www.twenga.fr"
		gzIP=$(getIPs "${website}")
		;;
		US)
		website="www.twenga.com"
		gzIP=$(getIPs "${website}")
		;;
		UK)
		website="www.twenga.co.uk"
		gzIP=$(getIPs "${website}")
		;;
		DE)
		website="www.twenga.de"
		gzIP=$(getIPs "${website}")
		;;
		ES) website="www.twenga.es"
		gzIP=$(getIPs "${website}")
		;;
		BE)
		website="www.twenga.be"
		gzIP=$(getIPs "${website}")
		;;
		IT)
		website="www.twenga.it"
		gzIP=$(getIPs "${website}")
		;;
		CH)
		website="www.twenga.ch"
		gzIP=$(getIPs "${website}")
		;;
		PL)
		website="www.twenga.pl"
		gzIP=$(getIPs "${website}")
		;;
		NL)
		website="www.twenga.nl"
		gzIP=$(getIPs "${website}")
		;;
		BR)
		website="www.twenga.com.br"
		gzIP=$(getIPs "${website}")
		;;
		RU)
		website="www.twenga.ru"
		gzIP=$(getIPs "${website}")
		;;
		AU)
		website="www.twenga.com.au"
		gzIP=$(getIPs "${website}")
		;;
		JP)
		website="www.twenga.jp"
		gzIP=$(getIPs "${website}")
		;;
		CN)
		website="www.tangou.cn"
		gzIP="82.192.92.29 82.192.92.30"
		;;
	esac

	echo "$gzIP"
	return;
}

# Renvoie les geozones hebergees dans le meme datacenter que la machine executant cette fonction
getLocalGeozones ()
{
	if [ "$TWENGA_DC" = "US" ]; then
		echo "$GEOZONE_PHPWEB_POOL5"
	elif [ "$TWENGA_DC" = "EU" ]; then
		echo "$GEOZONE_PHPWEB_POOL1 $GEOZONE_PHPWEB_POOL2 $GEOZONE_PHPWEB_POOL3 $GEOZONE_PHPWEB_POOL4"
	fi
}

